# 아키텍처 : 혼란스러운 세상에 질서를
프로그램을 작은 문제들로 나누었지만, 어디서부터 시작해야 할까요?  
작은 문제들을 가져다 질서가 잡힌, 잘 설계된 프로그램으로 만들어 봅시다. 아키텍처에 대한 세 가지 중요한 질문을 배우고 어떤 위험요소가 있는지 알아봅시다.


## 어디서부터 시작하나요?
큰 문제를 작은 기능들의 조각으로 나누었고, 작은 조각에 대한 해결 방법을 알고 있지만,  
유스케이스 다이어그램과 특징 리스트, 그 외에도 고려할 사항이 많습니다.

## 우리는 "아키텍처"가 필요합니다 : 아키텍처의 힘
**아키텍처는 <u>디자인의 구조</u>이고, <u>프로그램의 가장 중요한 부분들</u>과 그들 사이의 <u>관계</u>를 명확히 보여줍니다**

- **디자인의 구조** : 이미 알고 있는 것. 큰 시스템 설계에 도움을 줌
- **프로그램의 중요한 부분들** : 현시점 가장 필요한 것. 프로그램 제작 시작점
- **관계** : 유스케이스 다이어드램으로 부분들의 관계에 대해 다루기 시작했지만, 여전히 모듈간 연결 방식은 명확하지 않음

**아키텍처란?!**  
- 아키텍처는 시스템의 분할, 나뉜 부분들 사이의 연결과 상호작용 메커니즘, 그리고 시스템의 디자인에 사용된 원리와 결정 사항들을 담고 있는 시스템의 구조

**프로그래머들은 모두 같은 아키텍처를 이해해야 합니다!**

## 아키텍처는 크고 복잡하고 뒤죽박죽인 내용을 가져와 잘 정리된 프로그램으로 바꾸는 데 도움을 줍니다

## 여전히 우리는 위대한 소프트웨어를 만들고 싶습니다
프로젝트의 크기와 상관없이, 위대한 소프트웨어는 같은 방식으로 만들어 집니다

1. 여러분의 소프트웨어가 고객이 원하는 기능을 하도록 하세요
2. 객체지향의 기본원리를 적용해서 소프트웨어를 유연하게 하세요
3. 유지보수와 재사용이 쉬운 디자인을 위해 노력하세요

## 기능부터 시작합시다
작은 프로젝트에서는 요구사항 리스트를 사용, 큰 프로젝트에서는 특징 리스트를 사용하여 기능 정리함  


> **게리 게임 시스템 프레임웍 특징 목록**
>
> 1. 다양한 타입의 지형 지원
> 2. 공상 과학 소설, 판타지 소설 등에 등장하는 가상의 시대 포함, 다양한 시대 지원
> 3. 게임의 특성에 맞는 여러 타입의 부대 혹은 유닛 지원
> 4. 새로운 작전 수행이나 전쟁 시나리오를 위한 모듈 지원
> 5. 각 게임은 사각형의 타일들로 구성된 보드를 가지고 있고, 각 타일은 지형 타입을 가지고 있음
> 6. 프레임웍은 누구의 차례인지에 대한 정보를 유지함
> 7. 유닛들의 기본적인 이동을 관장함

- 위 특징들은 기능에 관한 것으로, 시스템이 무엇을 하는지에 초첨을 둠
- 이 중 중요도를 판단하여 우선순위를 메겨야 함


### 연필을 깎으며 : 무엇이 가장 중요하죠?

1. 다양한 타입의 지형 지원
2. 게임의 특성에 맞는 여러 타입의 부대 혹은 유닛 지원
3. 새로운 작전 수행이나 전쟁 시나리오를 위한 모듈 지원
4. 각 게임은 사각형의 타일들로 구성된 보드를 가지고 있고, 각 타일은 지형 타입을 가지고 있음

**여러분 프로그램에서 정말 중요한 일은 <u>아키텍처적</u>으로 중요한 일이며, 여러분은 그 일에 먼저 초점을 맞춰야 합니다**  
아키텍처는 구성요소들간 관계에 관한 것이며, 이 관계를 알아내려면 해당 구성요소의 내용을 알아야 하고,  
이를 통해 어떤 부분이 가장 중요한지 알아내는 것입니다

## 무엇이 아키텍처적으로 중요한가요? : 아키텍처에 관한 세 가지 질문
1. **시스템의 본질이 되는 부분인가?**
	- 해당 특징이 시스템의 **핵심** 인지 파악하는 것으로, 그 특징이 없는 시스템을 생각하면 시스템의 본질이 되는 특징을 찾은 것!
2. **이것은 무슨 의미죠?**
	- 특정 특징에 대한 설명이 무슨 뜻인지 확신이 서지 않으면, 보다 명확히 할 필요가 있습니다  
		(그 일은 시간이 오래 걸리거나, 시스템의 나머지 부분에 문제를 야기시킬 수 있음)
3. **도대체 어떻게 해야 하죠?**  
	- 구현이 어려워보이거나, 완전히 새로운 프로그래밍 작업일 경우, 초기부터 관심을 기울여야 필요합니다


### 연필을 깎으며2 : 아키텍트가 되어보세요
무엇이 중요하죠?
1. 게임을 위한 보드  -- Q1
2. 게임 특유의 유닛 -- Q1, Q2
3. 프레임웍은 기본적인 이동을 관장 -- Q3 (Q2)


## 바보 같은 질문이란 없습니다

**시스템의 본질이란 -- Q1**  
- 시스템의 본질은 가장 기본적인 수준이 완성됐을 때의 시스템 모습
- "이 특징이 구현되지 않으면 시스템이 해야할 일을 정말 하는 걸까?"

**의미를 잘 모를 때 -- Q2**
- 의미를 잘 모른다는 것은 요구사항이 잘못된 것이 아닌, 최소한의 명확성을 얻기위해 추가적인 요구사항을 얻어야 한다는 의미

**특징에 대해 잘 모를 때 -- Q3**  
- 세부 추가 사항에 관한 것이 아닌, 특징 전체에 대한 막연함이 있는 경우를 말하며 이는 **어떻게 해결할지 확신이 서지 않는 일** 이기도 함
- 시스템의 핵심부분, 그리고 특히 어려워 보이는 부분부터 시작하면 프로젝트의 성공으로 한발 나아가는 것!

## 문제는 위험(RISK)입니다
게리 시스템에서 세 가지 핵심적인 특징을 얻었지만, 커다란 질문은 남아있습니다 : 어떤 것을 먼저 할까요?  
**프로젝트 성공의 <u>위험요소를 줄이는 방향</u>으로 진행된다면, 어느 것을 먼저 하든 상관 없습니다**

1. **게임을 위한 보드**
	- 시스템의 핵심적 특징이 만들어지지 않으면 고객이 시스템에 만족하지 않을 위험이 있습니다
2. **게임 특유의 유닛**
	- 우리는 이것이 무엇을 의미하는지 모르기 때문에, 일의 양이 엄청 많을지도 모릅니다. 일정을 맞추는 데 위험 요소!
3. **프레임웍은 기본적인 이동을 관장**
	- 어떻게 할지 확실치 않은 것이기 때문에, 해결하지 못하거나 오래 걸릴 위험이 있습니다

**여기서 중요한 것은 <u>위험요소를 줄이는 것</u>이지 어떤 특징을 먼저 시작할지가 아닙니다.  
만들기로 한 것을 만드는 데 집중하기만 하면, 어떤 것부터라도 시작할 수 있습니다**


## 보드 인터페이스 작성하기

#### 문제점
- 게임 설계자가 새로운 게임을 만들 때 사용할 수 있는 Board라는 기반 타입 필요함
- 보드의 높이와 너비는 게임 설계자가 지정
- 주어진 위치에 있는 타일을 반환하고, 유닛을 타일에 추가하고, 주어진 X-Y 위치에 있는 모든 유닛 반환함

#### 해야 할 일
1. Board라는 새로운 클래스를 만드세요
2. Board에 너비와 높이를 받아서 새로운 보드를 만드는 생성자를 추가하세요  
	생성자는 보드를 사각형의 타일들로 X-Y위치에 하나씩 채웁니다
3. 타일의 X-Y 위치가 주어지면 주어진 위치에 있는 타일을 반환할 메서드를 작성하세요
4. 타일의 X와 Y 위치에 맞게 유닛들을 추가하는 메서드를 작성하세요
5. 주어진 X-Y 위치에 있는 타일 위의 모든 유닛들을 반환하는 메서드를 작성하세요

## 유스케이스 파헤치기 : 시나리오들이 위험요소를 줄이는 데 도움이 됩니다
- 시나리오 : 유스케이스를 사용하는 특정 경로
- 개발자가 시간이 없는 경우나, 유스케이스가 필요한 것에 비해 너무 형식적인 경우에  
	시나리오가 별 문서작업 없이 유스케이스의 여러 장점 줄 수 있음
- 개발자는 해당 클래스가 어떻게 사용될 것인지 간단한 시나리오를 작성해서, 시나리오상에서 잘 작동하는지 확인할 수 있음
- **형식을 갖추지 않더라도, 해당 클래스가 어떻게 사용되는지 간단한 설명을 할 수 있으며, 이를 통해 중요 요구사항을 잊지 않을 수 있음**
-
- 유스케이스는 정석적인 방법이며, 시나리오는 유스케이스를 이용하는 하나의 방법임을 잊지 말아야 함
	시나리오는 빠르게 문제를 해결할 때나 가장 보편적인 요구사항을 찾는 데 도움이 됨
- 시스템 설계에는 유스케이스, 경로, 대체경로 등 모든 요소가 필요함
- **시나리오는 막 시작하는 단계나 유스케이스를 작성하기에 정보가 부족할 때 도움이 됨**
- 시나리오는 요구분석 단계에서의 위험을 줄이는 것으로, 시스템 설계에서 가장 중요한 좋은 요구사항을 파악하는 데 도움이 됨
- 시나리오는 어떤 시스템에 대한 요구사항 리스트와 유스케이스가 충분히 확보되지 않았을 때,   
	모듈이나 코드 조각의 기초적인 내용을 이해하기 위해 시나리오를 사용하고 애플리케이션의 기본적인 부분을 채울 수 있음

### Board 인터페이스를 위한 시나리오

**게리 게임 시스템 프레임웍 - 보드 시나리오**
1. 게임 설계자가 높이와 너비를 가지고 보드를 생성한다
2. 플레이어 2가 탱크들을 (4,5)로 옮긴다
3. 플레이어 2가 군대를 (4,5)로 이동한다
4. 플레이어 1이 포병을 (4,5)로 이동한다
5. 게임이 (4,5)의 유닛들을 요구한다
6. 플레이어 1과 플레이어 2가 전쟁을 치른다
7. 게임이 (4,5) 지형을 요구한다
8. 플레이어 2의 유닛이 전쟁을 승리한다
9. 플레이어 1의 유닛들이 (4,5)에서 제거된다
10. 플레이어 1이 잠수함을 (2,2)로 이동한다
11. 게임이 (2,3)에 있는 지형을 요구한다

남은 것들
- 플레이어 1의 유닛들이 전쟁에 진다
- 게임설계자가 보드를 생성한다
- 게임설계자가 높이와 너비를 제공한다  

Q????????? 왜 이동후 지형 요구?ㅇ?


## 바보 같은 질문이란 없습니다

**시나리오와 유스케이스**  
- **시나리오는 유스케이스의 장점들을 주면서도 지금은 걱정할 필요가 없는 세부 사항까지는 신경쓰지 않게 합니다**  
- 시나리오에 관한 요구사항(고객에게서 끌어내지 않은)은 고객과의 소통, 혹은 문제를 통해 유추할 수 있다
- 시작 시점에서는 완벽한 모듈을 만들기 보다, 기본이 되는 부분을 만들어보고 이에 관한 위험요소를 줄이는 것이 중요함
- 너무 구체적인 내용까지 생각하여 유스케이스를 작성하려 하다보면 중요치 않은 문제를 다루느라 프로젝트에 위험요소를 추가할 수 있음
